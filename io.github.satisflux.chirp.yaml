app-id: io.github.satisflux.chirp
runtime: org.freedesktop.Platform
runtime-version: "25.08"
sdk: org.freedesktop.Sdk
command: chirp

modules:
  - name: python3.10
    buildsystem: autotools
    sources:
      - type: archive
        url: https://www.python.org/ftp/python/3.10.0/Python-3.10.0.tgz
        md5: 729e36388ae9a832b01cf9138921b383

  - name: desktop-integration
    buildsystem: simple
    build-commands:
      - mkdir -p /app/share/metainfo/
      - mv io.github.satisflux.chirp.metainfo.xml /app/share/metainfo/

      - mkdir -p /app/share/icons/hicolor/512x512/apps/
      - mv 512.png /app/share/icons/hicolor/512x512/apps/io.github.satisflux.chirp.png

      - mkdir -p /app/share/icons/hicolor/128x128/apps/
      - mv 128.png /app/share/icons/hicolor/128x128/apps/io.github.satisflux.chirp.png

      - mkdir -p /app/share/icons/hicolor/64x64/apps/
      - mv 64.png /app/share/icons/hicolor/64x64/apps/io.github.satisflux.chirp.png

      - mkdir -p /app/share/icons/hicolor/48x48/apps/
      - mv 48.png /app/share/icons/hicolor/48x48/apps/io.github.satisflux.chirp.png

      - mkdir -p /app/share/icons/hicolor/16x16/apps/
      - mv 16.png /app/share/icons/hicolor/16x16/apps/io.github.satisflux.chirp.png

      - mkdir -p /app/share/applications/
      - mv io.github.satisflux.chirp.desktop /app/share/applications/io.github.satisflux.chirp.desktop

    sources:
      - type: file
        path: io.github.satisflux.chirp.metainfo.xml

      - type: file
        path: icons/512.png

      - type: file
        path: icons/128.png

      - type: file
        path: icons/64.png

      - type: file
        path: icons/48.png

      - type: file
        path: icons/16.png

      - type: file
        path: io.github.satisflux.chirp.desktop

finish-args:
  - --share=network
  - --filesystem=home
  - --device=all
  - --talk-name=org.freedesktop.portal.Desktop
  - --socket=wayland
  - --socket=x11
