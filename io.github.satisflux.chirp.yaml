app-id: io.github.satisflux.chirp
runtime: org.freedesktop.Platform
runtime-version: "25.08"
sdk: org.freedesktop.Sdk
command: chirp

finish-args:
  - --share=network
  - --filesystem=home
  - --device=all
  - --socket=x11
  - --share=ipc

modules:
  - name: chirp
    buildsystem: simple
    build-commands:
      - python3.10 -m pip install --no-index ./chirp-20250912-py3-none-any.whl
    sources:
      - type: file
        url: https://archive.chirpmyradio.com/chirp_next/next-20250912/chirp-20250912-py3-none-any.whl
        sha256: 23946946bc49b8ac765eec28a6a081699b56072796875f41fa23df8291fc4ab6
    modules:
      - name: python3.10
        buildsystem: autotools
        sources:
          - type: archive
            url: https://www.python.org/ftp/python/3.10.0/Python-3.10.0.tgz
            sha256: c4e0cbad57c90690cb813fb4663ef670b4d0f587d8171e2c42bd4c9245bd2758

      - name: lark
        buildsystem: simple
        build-commands:
          - python3.10 -m pip install --no-index ./lark-1.2.2-py3-none-any.whl
        sources:
          - type: file
            url: https://files.pythonhosted.org/packages/2d/00/d90b10b962b4277f5e64a78b6609968859ff86889f5b898c1a778c06ec00/lark-1.2.2-py3-none-any.whl
            sha256: c2276486b02f0f1b90be155f2c8ba4a8e194d42775786db622faccd652d8e80c

      - name: yattag
        buildsystem: simple
        build-commands:
          - python3.10 setup.py install
        sources:
          - type: archive
            url: https://files.pythonhosted.org/packages/1c/1a/d3b2a2b8f843f5e7138471c4a5c9172ef62bb41239aa4371784b7448110c/yattag-1.16.1.tar.gz
            sha256: baa8f254e7ea5d3e0618281ad2ff5610e0e5360b3608e695c29bfb3b29d051f4

      - name: pyserial
        buildsystem: simple
        build-commands:
          - python3.10 -m pip install --no-index ./pyserial-3.5-py2.py3-none-any.whl
        sources:
          - type: file
            url: https://files.pythonhosted.org/packages/07/bc/587a445451b253b285629263eb51c2d8e9bcea4fc97826266d186f96f558/pyserial-3.5-py2.py3-none-any.whl
            sha256: c4451db6ba391ca6ca299fb3ec7bae67a5c55dde170964c7a14ceefec02f2cf0
            
      - name: suds
        buildsystem: simple
        build-commands:
          - python3.10 -m pip install --no-index ./suds-1.2.0-py3-none-any.whl
        sources:
          - type: file
            url: https://files.pythonhosted.org/packages/c4/43/658bd1825a5f58c1182269eaa6165084d8d95e031cd7e34a2a1bcf773579/suds-1.2.0-py3-none-any.whl
            sha256: 2cf8ed43ed8a0df350027c741f5295d6be8443d4e820cb36f2c17b033e331d5b

      - name: requests
        buildsystem: simple
        build-commands:
          - python3.10 -m pip install --no-index ./requests-2.32.5-py3-none-any.whl
        sources:
          - type: file
            url: https://files.pythonhosted.org/packages/1e/db/4254e3eabe8020b458f1a747140d32277ec7a271daf1d235b70dc0b4e6e3/requests-2.32.5-py3-none-any.whl
            sha256: 2462f94637a34fd532264295e186976db0f5d453d1cdd31473c85a6a161affb6
        modules:
          - name: urllib3
            buildsystem: simple
            build-commands:
              - python3.10 -m pip install --no-index ./urllib3-2.5.0-py3-none-any.whl
            sources:
              - type: file
                url: https://files.pythonhosted.org/packages/a7/c2/fe1e52489ae3122415c51f387e221dd0773709bad6c6cdaa599e8a2c5185/urllib3-2.5.0-py3-none-any.whl
                sha256: e6b01673c0fa6a13e374b50871808eb3bf7046c4b125b216f6bf1cc604cff0dc

          - name: certifi
            buildsystem: simple
            build-commands:
              - python3.10 -m pip install --no-index ./certifi-2025.8.3-py3-none-any.whl
            sources:
              - type: file
                url: https://files.pythonhosted.org/packages/e5/48/1549795ba7742c948d2ad169c1c8cdbae65bc450d6cd753d124b17c8cd32/certifi-2025.8.3-py3-none-any.whl
                sha256: f6c12493cfb1b06ba2ff328595af9350c65d6644968e5d3a2ffd78699af217a5

          - name: idna
            buildsystem: simple
            build-commands:
              - python3.10 -m pip install --no-index ./idna-3.10-py3-none-any.whl
            sources:
              - type: file
                url: https://files.pythonhosted.org/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl
                sha256: 946d195a0d259cbba61165e88e65941f16e9b36ea6ddb97f00452bae8b1287d3

          - name: charset_normalizer
            buildsystem: simple
            build-commands:
              - python3.10 -m pip install --no-index ./charset_normalizer-3.4.3-py3-none-any.whl
            sources:
              - type: file
                url: https://files.pythonhosted.org/packages/8a/1f/f041989e93b001bc4e44bb1669ccdcf54d3f00e628229a85b08d330615c5/charset_normalizer-3.4.3-py3-none-any.whl
                sha256: ce571ab16d890d23b5c278547ba694193a45011ff86a9162a71307ed9f86759a

      - name: wxPython
        buildsystem: simple
        build-commands:
          - python3.10 setup.py install --prefix=/app
        sources:
          - type: archive
            url: https://files.pythonhosted.org/packages/d9/33/b616c7ed4742be6e0d111ca375b41379607dc7cc7ac7ff6aead7a5a0bf53/wxPython-4.2.0.tar.gz
            sha256: 663cebc4509d7e5d113518865fe274f77f95434c5d57bc386ed58d65ceed86c7 
        modules:
          - name: attrdict3
            buildsystem: simple
            build-commands:
              - python3.10 -m pip install --no-index ./attrdict3-2.0.2-py2.py3-none-any.whl
            sources:
              - type: file
                url: https://files.pythonhosted.org/packages/d7/3c/a7d33166f92b50ca0e154411c351430700c21d8115b93c515ae9137a91f6/attrdict3-2.0.2-py2.py3-none-any.whl
                sha256: a98b72de6a3f20b0997cc7efbba3555af6558ed9a97de4468a3f81cac11595dc
            modules:
              - name: six
                buildsystem: simple
                build-commands:
                  - python3.10 -m pip install --no-index ./six-1.17.0-py2.py3-none-any.whl
                sources:
                  - type: file
                    url: https://files.pythonhosted.org/packages/b7/ce/149a00dd41f10bc29e5921b496af8b574d8413afcd5e30dfa0ed46c2cc5e/six-1.17.0-py2.py3-none-any.whl
                    sha256: 4721f391ed90541fddacab5acf947aa0d3dc7d27b2e1e8eda2be8970586c3274

  - name: desktop-integration
    buildsystem: simple
    build-commands:
      - install -Dm644 io.github.satisflux.chirp.metainfo.xml -t /app/share/metainfo/io.github.satisflux.chirp.metainfo.xml
      - install -Dm644 io.github.satisflux.chirp.png /app/share/icons/hicolor/512x512/apps/io.github.satisflux.chirp.png
      - install -Dm644 io.github.satisflux.chirp.desktop /app/share/applications/io.github.satisflux.chirp.desktop

    sources:
      - type: file
        path: io.github.satisflux.chirp.metainfo.xml

      - type: file
        path: io.github.satisflux.chirp.png

      - type: file
        path: io.github.satisflux.chirp.desktop     
